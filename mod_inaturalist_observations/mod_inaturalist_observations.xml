<?xml version="1.0" encoding="utf-8"?>
<extension type="module" version="4.0" client="site" method="upgrade">
    <name>mod_inaturalist_observations</name>
    <title>iNaturalist Observations</title>
    <version>1.0.0</version>
    <description>Displays recent iNaturalist observations from a specific user and taxon.</description>

    <!-- Autorenangaben -->
    <author>Andreas Kunze</author>
    <creationDate>2025-04-22</creationDate>
    <authorUrl>https://github.com/AK-CCM/joomla-inaturalist-observations</authorUrl>

    <!-- Lizenz und Urheberrecht -->
    <copyright>Andreas Kunze, assisted by ChatGPT (OpenAI GPT-4, April 2025)</copyright>
    <license>GNU General Public License v3.0</license>

    <!-- Moduldateien -->
    <files>
        <filename module="mod_inaturalist_observations">mod_inaturalist_observations.php</filename>
        <filename>helper.php</filename>
        <filename>index.html</filename>
        <folder>tmpl</folder>
        <folder>language</folder>
    </files>

    <!-- Sprachdateien -->
    <languages>
        <language tag="de-DE">language/de-DE/de-DE.mod_inaturalist_observations.ini</language>
        <language tag="en-GB">language/en-GB/en-GB.mod_inaturalist_observations.ini</language>
    </languages>

    <!-- Konfigurierbare Parameter im Backend -->
    <config>
        <fields name="params">
            <fieldset name="basic">
                <field name="user_id"
                       type="text"
                       required="true"
                       label="MOD_INATURALIST_OBSERVATIONS_USER_ID_LABEL"
                       description="MOD_INATURALIST_OBSERVATIONS_USER_ID_DESC" />

                <!-- Dropdown für taxon_id -->
                <field name="taxon_id"
                       type="list"
                       label="MOD_INATURALIST_OBSERVATIONS_TAXON_ID_LABEL"
                       description="MOD_INATURALIST_OBSERVATIONS_TAXON_ID_DESC">
                    <option value="">MOD_INATURALIST_OBSERVATIONS_TAXON_ALL</option>
                    <option value="47170">MOD_INATURALIST_OBSERVATIONS_TAXON_PLANTS</option>
                    <option value="47169">MOD_INATURALIST_OBSERVATIONS_TAXON_FUNGI</option>
                    <option value="47168">MOD_INATURALIST_OBSERVATIONS_TAXON_ANIMALS</option>
                    <option value="custom">MOD_INATURALIST_OBSERVATIONS_TAXON_CUSTOM</option>
                </field>

                <!-- Wird nur angezeigt, wenn 'custom' gewählt ist -->
                <field name="taxon_custom"
                       type="text"
                       label="MOD_INATURALIST_OBSERVATIONS_TAXON_CUSTOM_LABEL"
                       description="MOD_INATURALIST_OBSERVATIONS_TAXON_CUSTOM_DESC"
                       showon="taxon_id:custom" />

                <field name="count"
                       type="number"
                       default="5"
                       label="MOD_INATURALIST_OBSERVATIONS_COUNT_LABEL"
                       description="MOD_INATURALIST_OBSERVATIONS_COUNT_DESC" />

                <field name="cache_time"
                       type="number"
                       default="86400"
                       label="MOD_INATURALIST_OBSERVATIONS_CACHE_DURATION_LABEL"
                       description="MOD_INATURALIST_OBSERVATIONS_CACHE_DURATION_DESC" />
            </fieldset>
        </fields>
    </config>
</extension>
